<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Leaflet.Elevation by MrMufflon</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Leaflet.Elevation</h1>
        <p>Leaflet plugin to view height profile of GeoJSON- and GPX polylines using d3</p>

        <p class="view"><a href="https://github.com/MrMufflon/Leaflet.Elevation">View the Project on GitHub <small>MrMufflon/Leaflet.Elevation</small></a></p>


        <ul>
          <li><a href="https://github.com/MrMufflon/Leaflet.Elevation/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/MrMufflon/Leaflet.Elevation/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/MrMufflon/Leaflet.Elevation">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="leafletelevation" class="anchor" href="#leafletelevation"><span class="octicon octicon-link"></span></a>Leaflet.Elevation</h1>

<ol>
<li><a href="https://github.com/MrMufflon/Leaflet.Elevation#what-is-this">What is this?</a></li>
<li><a href="https://github.com/MrMufflon/Leaflet.Elevation#how-to-use">How to use</a></li>
<li><a href="https://github.com/MrMufflon/Leaflet.Elevation#setup-development-environment">Setup development environment</a></li>
<li><a href="https://github.com/MrMufflon/Leaflet.Elevation#customizing-styles">Customizing styles</a></li>
</ol><h3>
<a name="what-is-this" class="anchor" href="#what-is-this"><span class="octicon octicon-link"></span></a>What is this?</h3>

<p>A <a href="http://leafletjs.com">Leaflet</a> plugin to view an interactive height profile of polylines lines using <a href="http://d3js.org">d3</a>. Currently Chrome, Firefox and IE 10+ are supported and tested.
This plugin is under development.</p>

<p>Support for</p>

<ul>
<li>GeoJSON <a href="http://mrmufflon.github.io/Leaflet.Elevation/example/example.html">Demo</a>
</li>
<li>GPX-files using <a href="https://github.com/mpetazzoni/leaflet-gpx">leaflet-gpx</a> <a href="http://mrmufflon.github.io/Leaflet.Elevation/example/example_gpx.html">Demo</a>
</li>
</ul><p><em>Tested with Leaflet 0.4+</em></p>

<p><img src="http://mrmufflon.github.io/Leaflet.Elevation/images/screen.jpg"></p>

<h3>
<a name="how-to-use" class="anchor" href="#how-to-use"><span class="octicon octicon-link"></span></a>How to use</h3>

<div class="highlight highlight-javascript"><pre><span class="c1">//all used options are the default values</span>
<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">elevation</span><span class="p">({</span>
    <span class="nx">position</span><span class="o">:</span> <span class="s2">"topright"</span><span class="p">,</span>
    <span class="nx">theme</span><span class="o">:</span> <span class="s2">"steelblue-theme"</span><span class="p">,</span> <span class="c1">//default: lime-theme</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">125</span><span class="p">,</span>
    <span class="nx">margins</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="nx">right</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="nx">bottom</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="mi">50</span>
    <span class="p">},</span>
    <span class="nx">useHeightIndicator</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//if false a marker is drawn at map position</span>
    <span class="nx">interpolation</span><span class="o">:</span> <span class="s2">"linear"</span><span class="p">,</span> <span class="c1">//see https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-area_interpolate</span>
    <span class="nx">hoverNumber</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">decimalsX</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">//decimals on distance (always in km)</span>
        <span class="nx">decimalsY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">//deciamls on height (always in m)</span>
        <span class="nx">formatter</span><span class="o">:</span> <span class="kc">undefined</span> <span class="c1">//custom formatter function may be injected</span>
    <span class="p">},</span>
    <span class="nx">xTicks</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span> <span class="c1">//number of ticks in x axis, calculated by default according to width</span>
    <span class="nx">yTicks</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span> <span class="c1">//number of ticks on y axis, calculated by default according to height</span>
    <span class="nx">collapsed</span><span class="o">:</span> <span class="kc">false</span>    <span class="c1">//collapsed mode, show chart on click or mouseover</span>
<span class="p">});</span>
<span class="nx">el</span><span class="p">.</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
<span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">geojson</span><span class="p">,{</span>
    <span class="nx">onEachFeature</span><span class="o">:</span> <span class="nx">el</span><span class="p">.</span><span class="nx">addData</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="c1">//working on a better solution</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">elevation</span><span class="p">();</span>
<span class="nx">el</span><span class="p">.</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">GPX</span><span class="p">(</span><span class="s2">"./mytrack.gpx"</span><span class="p">,</span> <span class="p">{</span><span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">g</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"addline"</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addData</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">g</span><span class="p">.</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>

<div class="highlight highlight-javascript"><pre><span class="c1">// reset data and display</span>
<span class="nx">el</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
</pre></div>

<h3>
<a name="setup-development-environment" class="anchor" href="#setup-development-environment"><span class="octicon octicon-link"></span></a>Setup development environment</h3>

<p>If you are new to grunt please refer to the <a href="http://gruntjs.com/getting-started">quick start</a> guide.</p>

<p>Install npm dependencies with</p>

<pre><code>npm install
</code></pre>

<p>Run jasmine tests with</p>

<pre><code>grunt test
</code></pre>

<p>And compile with</p>

<pre><code>grunt
</code></pre>

<h3>
<a name="customizing-styles" class="anchor" href="#customizing-styles"><span class="octicon octicon-link"></span></a>Customizing styles</h3>

<p>To generate different themes <a href="http://lesscss.org/">lessCSS</a> is used. Create your own theme in a new .less file in src/css/themes. Usable variables are</p>

<div class="highlight highlight-css"><pre><span class="k">@theme</span> <span class="o">:</span> <span class="nt">lime-theme</span><span class="p">;</span>
<span class="k">@base-color</span> <span class="o">:</span> <span class="nf">#9CC222</span><span class="p">;</span> <span class="o">//</span><span class="nt">basecolor</span> <span class="nt">to</span> <span class="nt">derive</span> <span class="nt">other</span> <span class="nt">colors</span> <span class="nt">from</span>
<span class="k">@highlight-color</span> <span class="o">:</span> <span class="nf">#637E0B</span><span class="p">;</span> <span class="o">//</span><span class="nt">basecolor</span> <span class="nt">to</span> <span class="nt">derive</span> <span class="nt">selections</span> <span class="nt">from</span>
<span class="k">@background</span> <span class="o">:</span> <span class="nt">fade</span><span class="o">(</span><span class="k">@base-color</span><span class="o">,</span><span class="nt">20</span><span class="o">%)</span><span class="p">;</span> <span class="o">//</span><span class="nt">background-color</span> 
<span class="k">@drag-color</span> <span class="o">:</span> <span class="nt">fade</span><span class="o">(</span><span class="k">@highlight-color</span><span class="o">,</span><span class="nt">40</span><span class="o">%)</span><span class="p">;</span> <span class="o">//</span><span class="nt">drag</span> <span class="nt">selection</span> <span class="nt">color</span>
<span class="k">@axis-color</span> <span class="o">:</span> <span class="nt">darken</span><span class="o">(</span><span class="k">@base-color</span><span class="o">,</span><span class="nt">20</span><span class="o">%)</span><span class="p">;</span> <span class="o">//</span><span class="nt">color</span> <span class="nt">of</span> <span class="nt">axes</span>
<span class="k">@stroke-color</span> <span class="o">:</span> <span class="nt">darken</span><span class="o">(</span><span class="k">@base-color</span><span class="o">,</span><span class="nt">40</span><span class="o">%)</span><span class="p">;</span> <span class="o">//</span><span class="nt">color</span> <span class="nt">for</span> <span class="nt">mouse</span> <span class="nt">highlight</span>
<span class="k">@stroke-width-mouse-focus</span> <span class="o">:</span> <span class="nt">1</span><span class="p">;</span> <span class="o">//</span><span class="nt">stroke</span> <span class="nt">width</span> <span class="nt">for</span> <span class="nt">mouse</span> <span class="nt">highlight</span>
<span class="k">@stroke-width-height-focus</span><span class="o">:</span> <span class="nt">2</span><span class="p">;</span> <span class="o">//</span><span class="nt">stroke</span> <span class="nt">width</span> <span class="nt">for</span> <span class="nt">height</span> <span class="nt">focus</span> <span class="nt">indicator</span>
<span class="k">@stroke-width-axis</span> <span class="o">:</span> <span class="nt">2</span><span class="p">;</span> <span class="o">//</span><span class="nt">stroke</span> <span class="nt">width</span> <span class="nt">for</span> <span class="nt">axes</span><span class="p">;</span>
</pre></div>

<p>Add the theme file to the less- and cssmin task in the Gruntfile and you´re good to go.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/MrMufflon">MrMufflon</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>